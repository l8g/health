# rppg

heath monitoring




## python 项目
### 训练预处理
1. 读取视频和标签数据
2. 对视频的每一帧做人脸识别，识别成功后把人脸剪出来，缩放为128x128像素大小，作为原始数据
3. 把视频切成180帧的片段，计算相邻两帧的差diff，最后一张图的diff为0
4. 把帧差数据标准化，除以标准差，没有减去均值
5. 把原始数据标准化，减去均值，除以标准差
6. 把标签数据取相邻两帧的差，最后一帧取零，除以标准差（没有减去均值），作为真值
7. 把原始视频数据（180x128x128x3），视频帧差数据（180x128x128x3）和标签差数据（180）传入DeepPhys模型中训练

### 测试预处理
1. 流程大致与训练相同，但不用处理标签数据
2. 采集的视频如果中间有好几帧没有检测到人脸该怎么办？
    1. 帧差应该为0
    2. 这些缺失的帧差应该被构建出来

### 后处理
1. 得到的数据应该是标签的帧差，理论上讲，帧差的频率和原始信号的频率是一样的
2. 得到的信号先通过一个去趋势函数，再通过一个带通滤波器（BPF）过滤信号
3. 通过FFT或者PEAK方式得到心率

